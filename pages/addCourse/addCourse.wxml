<!--pages/addCourse/addCourse.wxml-->
<page-meta>
	<navigation-bar title="添加课程" />
</page-meta>

<van-dialog id="van-dialog" />
<!-- 课程名称 -->
<van-field
 size="large"
 label="课程名称"
 input-align="right"
 value="{{className}}"
 placeholder="请输入课程名称"
 bind:change="onClassNameChange"
/>
<!-- 任课教师 -->
<van-cell
 size="large"
 title="任课教师"
 value="{{teacherName}}"
 bind:click="onAddTeacher"
 clickable
/>

<!-- 开课时间 -->
<van-cell
 size="large"
 title="开课时间"
 value="{{startTime}}"
 bind:click="onAddStartTime"
 clickable
/>

<!-- 开课时间 -->
<van-cell
 size="large"
 title="结课时间"
 value="{{endTime}}"
 bind:click="onAddEndTime"
 clickable
/>

<!-- 时间段列表循环 -->
<van-cell-group title="课程时间段">
	<van-swipe-cell
	 right-width="65"
	 wx:for="{{ timeList }}"
	 wx:key="index"
	 id="{{item.id}}"
	 async-close
	 bind:close="onClose"
	>
		<van-cell title="{{ item.weekday }}" value="{{ item.session }}" />
		<view slot="right" class="van-swipe-cell-right">
			删除
		</view>
	</van-swipe-cell>
</van-cell-group>

<view class="button">
	<van-button
	 block
	 plain
	 type="info"
	 icon="plus"
	 bind:click="onAddTimeSlot"
	>
		添加时间段
	</van-button>
</view>

<!-- 学生列表循环 -->
<van-cell-group title="学生列表">
	<van-swipe-cell
	 right-width="65"
	 wx:for="{{ studentList }}"
	 wx:key="index"
	 id="{{item.id}}"
	 async-close
	 bind:close="onClose"
	>
		<van-cell title="{{ item.studentName }}" value="{{ item.studentId }}" />
		<view slot="right" class="van-swipe-cell-right">
			删除
		</view>
	</van-swipe-cell>
</van-cell-group>

<view class="button">
	<van-button
	 block
	 plain
	 type="info"
	 icon="plus"
	 bind:click="onAddStudent"
	>
		添加学生
	</van-button>
</view>

<view class="button">
	<van-button
	 block
	 type="info"
	 bind:click="onSaveCourse"
	>
		确认添加
	</van-button>
</view>

<!-- 弹出层：选择任课教师 -->
<van-popup
 show="{{ showTeacher }}"
 position="bottom"
 bind:close="onCloseTeacher"
 custom-style="height:55%"
>
	<van-picker
	 show-toolbar
	 title="选择任课教师"
	 columns="{{ teacherList }}"
	 bind:cancel="onCancelTeacher"
	 bind:confirm="onConfirmTeacher"
	/>
</van-popup>

<!-- 弹出层：选择开课时间 -->
<van-popup
 show="{{ showStartTime }}"
 position="bottom"
 bind:close="onCloseStartTime"
 custom-style="height:55%"
>
	<van-picker
	 show-toolbar
	 title="选择任课教师"
	 columns="{{ starttime }}"
	 bind:cancel="onCancelStartTime"
	 bind:confirm="onConfirmStartTime"
	/>
</van-popup>

<!-- 弹出层：选择结课时间 -->
<van-popup
 show="{{ showEndTime }}"
 position="bottom"
 bind:close="onCloseEndTime"
 custom-style="height:55%"
>
	<van-picker
	 show-toolbar
	 title="选择任课教师"
	 columns="{{ endtime }}"
	 bind:cancel="onCancelEndTime"
	 bind:confirm="onConfirmEndTime"
	/>
</van-popup>

<!-- 弹出层：选择上课时间段 -->
<van-popup
 show="{{ showTimeSlot }}"
 position="bottom"
 custom-style="height: 55%;"
 bind:close="onCloseTime"
>

	<van-picker
	 show-toolbar
	 title="选择上课时间"
	 columns="{{ timeslot }}"
	 bind:cancel="onCancelTime"
	 bind:confirm="onConfirmTime"
	/>
</van-popup>
<van-toast id="van-toast" />

